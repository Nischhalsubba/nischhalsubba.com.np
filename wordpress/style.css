
/* 
Theme Name: Nischhal Pro
Theme URI: https://nischhal.com
Author: Nischhal Raj Subba
Author URI: https://nischhal.com
Description: A high-performance, GSAP-powered portfolio theme for elite product designers. Features a custom cursor engine, dynamic customizer, and Web3 aesthetic.
Version: 9.0
License: GNU General Public License v2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html
Tags: portfolio, dark-mode, grid-layout, gsap-animation, custom-cursor
*/

/* -------------------------------------------------------------------------- */
/*	1. DESIGN TOKENS & VARIABLES
/* -------------------------------------------------------------------------- */
/* 
   These variables are the DNA of the theme. 
   They are overridden by the WordPress Customizer settings in functions.php.
*/
:root {
    /* --- Layout & Spacing --- */
    --max-width: 1200px;
    /* Fluid clamp for consistent vertical rhythm across devices */
    --section-gap: clamp(80px, 10vh, 160px); 
    --container-padding: clamp(24px, 5vw, 40px);

    /* --- Default Dark Theme Palette (Fallback) --- */
    --bg-root: #050505;
    --bg-surface: #0a0a0a;
    --bg-card: #111111;
    --bg-nav: rgba(5, 5, 5, 0.8);
    --bg-nav-blur: 24px;
    
    /* --- Typography Colors --- */
    --text-primary: #FFFFFF;
    --text-secondary: #D4D4D8; /* Zinc-300 */
    --text-tertiary: #A1A1AA;  /* Zinc-400 */
    
    /* --- Accents --- */
    --accent-blue: #3B82F6;
    
    /* --- Borders & Outlines --- */
    --border-faint: rgba(255, 255, 255, 0.08);
    --border-light: rgba(255, 255, 255, 0.15);
    --stroke-color: rgba(255, 255, 255, 0.4); 
    
    /* --- UI Components --- */
    --bg-pill: rgba(255, 255, 255, 0.05);
    --bg-glider: rgba(255, 255, 255, 0.1);
    --hover-overlay: rgba(255, 255, 255, 0.03);
    
    /* --- Cursor System (Overridden by Customizer) --- */
    --cursor-color: #FFFFFF;
    --cursor-outline: rgba(255, 255, 255, 0.3);
    
    /* --- Typography Families --- */
    --font-serif: "Playfair Display", serif;
    --font-sans: "Inter", sans-serif;
    
    /* --- Z-Index Layering System --- */
    --z-canvas: 0;
    --z-content: 10;
    --z-nav: 1000;
    --z-toggle: 2000;
    --z-menu-btn: 2001;
    --z-menu-overlay: 1999;
    --z-mobile-logo: 2000;
    --z-floating-btn: 900;
    /* Highest possible integer to ensure visibility over everything */
    --z-cursor: 2147483647; 
    
    /* --- Animations --- */
    --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
}

/* Light Mode Overrides (Toggled via JS attribute on HTML tag) */
[data-theme="light"] {
    --bg-root: #FFFFFF;
    --bg-surface: #F8FAFC;
    --bg-card: #FFFFFF;
    --bg-nav: rgba(255, 255, 255, 0.85);
    
    --text-primary: #0f172a;
    --text-secondary: #475569;
    --text-tertiary: #64748b;
    
    --border-faint: rgba(0, 0, 0, 0.08);
    --border-light: rgba(0, 0, 0, 0.15);
    --stroke-color: rgba(15, 23, 42, 0.25);
    
    --bg-pill: rgba(0, 0, 0, 0.04);
    --bg-glider: rgba(0, 0, 0, 0.07);
    --hover-overlay: rgba(0, 0, 0, 0.02);
    
    --cursor-color: #000000;
    --cursor-outline: rgba(0, 0, 0, 0.2);
}

/* -------------------------------------------------------------------------- */
/*	2. RESET & BASE
/* -------------------------------------------------------------------------- */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
    width: 100%;
}

body {
    background-color: var(--bg-root);
    color: var(--text-primary);
    font-family: var(--font-sans);
    line-height: 1.7;
    overflow-x: hidden;
    min-height: 100vh;
    transition: background-color 0.5s var(--ease-standard);
}

body.menu-open { overflow: hidden; /* Lock scroll when menu is open */ }

/* Background Grid Canvas */
#grid-canvas {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: var(--z-canvas);
    pointer-events: none;
    mix-blend-mode: screen;
    opacity: 0.8;
}
[data-theme="light"] #grid-canvas { mix-blend-mode: multiply; opacity: 0.6; }

a { text-decoration: none; color: inherit; transition: color 0.3s var(--ease-standard), opacity 0.3s; }
img { display: block; max-width: 100%; }

/* -------------------------------------------------------------------------- */
/*	3. LAYOUT UTILITIES
/* -------------------------------------------------------------------------- */
.container {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--container-padding);
    width: 100%;
    position: relative;
    z-index: var(--z-content);
}

.section-container {
    padding: var(--section-gap) 0;
    position: relative;
}

/* -------------------------------------------------------------------------- */
/*	4. CUSTOM CURSOR (Fixed)
/* -------------------------------------------------------------------------- */
/* 
   We default to opacity: 0 instead of display: none.
   Display: none can sometimes cause JS position calculation errors.
   Opacity allows element existence but invisibility until JS kicks in.
*/
.custom-cursor-dot {
    position: fixed;
    top: 0;
    left: 0;
    width: 10px;
    height: 10px;
    background: var(--cursor-color);
    border-radius: 50%;
    pointer-events: none;
    z-index: var(--z-cursor);
    transform: translate(-50%, -50%); /* Center on coords */
    opacity: 0; /* Hidden by default */
    transition: opacity 0.3s ease, transform 0.1s linear;
}

.custom-cursor-outline {
    position: fixed;
    top: 0;
    left: 0;
    width: 44px;
    height: 44px;
    border: 2px solid var(--cursor-outline);
    border-radius: 50%;
    pointer-events: none;
    z-index: var(--z-cursor);
    transform: translate(-50%, -50%); /* Center on coords */
    opacity: 0; /* Hidden by default */
    transition: width 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                height 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                border-color 0.3s,
                opacity 0.3s ease;
}

/* 
   When JS detects mouse movement, it adds 'cursor-visible' class.
   We then hide the system cursor and show our custom elements.
*/
body.cursor-visible {
    cursor: none !important;
}
body.cursor-visible a, 
body.cursor-visible button, 
body.cursor-visible input {
    cursor: none !important;
}
body.cursor-visible .custom-cursor-dot, 
body.cursor-visible .custom-cursor-outline {
    opacity: 1 !important;
}

/* -------------------------------------------------------------------------- */
/*	5. TYPOGRAPHY
/* -------------------------------------------------------------------------- */
h1, h2, h3, h4, h5 {
    font-family: var(--font-serif);
    font-weight: 400;
    color: var(--text-primary);
    letter-spacing: -0.02em;
    margin-top: 0;
}

.hero-title {
    font-size: clamp(3rem, 9vw, 6.5rem);
    line-height: 1.05;
    margin-bottom: 32px;
    letter-spacing: -0.03em;
}

.section-title {
    font-size: clamp(2.5rem, 6vw, 4rem);
    line-height: 1.1;
    margin-bottom: 60px;
}

.body-large {
    font-size: clamp(1.15rem, 2vw, 1.35rem);
    color: var(--text-secondary);
    max-width: 680px;
    font-weight: 300;
    line-height: 1.6;
    margin-bottom: 48px;
}

/* -------------------------------------------------------------------------- */
/*	6. TEXT REVEAL ENGINE
/* -------------------------------------------------------------------------- */
.text-reveal-wrap {
    position: relative;
    display: inline-block;
    line-height: 1.1;
    color: transparent; /* Hide original text */
}

.text-outline {
    position: relative;
    z-index: 1;
    color: transparent;
    -webkit-text-stroke: 1px var(--stroke-color);
    display: block;
    pointer-events: none;
    white-space: pre-wrap;
}

.text-fill {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
    color: var(--text-primary);
    width: 100%;
    height: 100%;
    clip-path: inset(0 100% 0 0); /* Revealer mask */
    -webkit-text-stroke: 0;
    white-space: pre-wrap;
    pointer-events: auto;
}

/* -------------------------------------------------------------------------- */
/*	7. NAVIGATION SYSTEM
/* -------------------------------------------------------------------------- */
/* Floating Desktop Nav */
.nav-wrapper {
    position: fixed;
    top: 32px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    z-index: var(--z-nav);
    pointer-events: none;
}

.nav-pill {
    position: relative;
    pointer-events: auto;
    background: var(--bg-nav);
    backdrop-filter: blur(var(--bg-nav-blur));
    -webkit-backdrop-filter: blur(var(--bg-nav-blur));
    border: 1px solid var(--border-faint);
    border-radius: 9999px;
    padding: 6px;
    display: flex;
    align-items: center;
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.2);
}

.nav-link {
    position: relative;
    z-index: 2;
    padding: 12px 24px;
    font-size: 0.88rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.4s var(--ease-standard);
    white-space: nowrap;
}

.nav-link:hover, .nav-link.active {
    color: var(--text-primary);
}

.nav-glider {
    position: absolute;
    top: 6px;
    left: 0;
    height: calc(100% - 12px);
    background: var(--bg-glider);
    border-radius: 9999px;
    z-index: 1;
    pointer-events: none;
    opacity: 0;
    transition: all 0.5s cubic-bezier(0.2, 1, 0.2, 1);
}

/* Mobile Nav Toggle */
.mobile-nav-toggle {
    display: none;
    position: fixed; 
    top: 24px; 
    left: 24px; 
    z-index: var(--z-menu-btn);
    width: 52px; 
    height: 52px; 
    background: var(--bg-nav); 
    backdrop-filter: blur(12px);
    border-radius: 50%;
    border: 1px solid var(--border-faint); 
    cursor: pointer; 
    align-items: center; 
    justify-content: center; 
    flex-direction: column; 
    gap: 5px;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.mobile-nav-toggle span { 
    display: block; 
    width: 22px; 
    height: 1.5px; 
    background: var(--text-primary); 
    transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
    transform-origin: center;
}

body.menu-open .mobile-nav-toggle span:nth-child(1) { transform: translateY(3px) rotate(45deg); }
body.menu-open .mobile-nav-toggle span:nth-child(2) { transform: translateY(-3.5px) rotate(-45deg); }

.mobile-nav-overlay {
    position: fixed; 
    inset: 0; 
    background: var(--bg-root); 
    z-index: var(--z-menu-overlay);
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center;
    opacity: 0; 
    pointer-events: none; 
    transition: opacity 0.5s var(--ease-standard);
    backdrop-filter: blur(20px);
}

body.menu-open .mobile-nav-overlay { opacity: 1; pointer-events: auto; }

.mobile-nav-links {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 32px;
}

.mobile-nav-links a { 
    font-family: var(--font-serif); 
    font-size: clamp(2.5rem, 8vw, 3.5rem); 
    color: var(--text-secondary); 
    opacity: 0; /* Animated in by JS */
    transform: translateY(20px);
}

.mobile-nav-links a.active { color: var(--text-primary); font-style: italic; }

.mobile-logo {
    display: none; 
    position: fixed; 
    top: 32px; 
    left: 50%; 
    transform: translateX(-50%);
    z-index: var(--z-mobile-logo); 
    font-family: var(--font-serif); 
    font-weight: 600;
    font-size: 1.1rem;
    padding: 8px 24px; 
    background: var(--bg-nav); 
    backdrop-filter: blur(12px);
    border-radius: 99px; 
    border: 1px solid var(--border-faint);
    color: var(--text-primary);
}

/* Theme Toggle Button */
.theme-toggle-btn {
    position: fixed;
    top: 32px;
    right: 32px;
    z-index: var(--z-toggle);
    width: 52px; 
    height: 52px;
    border-radius: 50%;
    border: 1px solid var(--border-faint);
    background: var(--bg-nav);
    backdrop-filter: blur(16px);
    color: var(--text-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s var(--ease-standard);
}
.theme-toggle-btn:hover { transform: scale(1.1); background: var(--bg-surface); }
.theme-toggle-btn svg { width: 22px; height: 22px; fill: currentColor; }

/* -------------------------------------------------------------------------- */
/*	8. COMPONENTS
/* -------------------------------------------------------------------------- */

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 18px 48px;
    border-radius: 9999px;
    font-weight: 600;
    font-size: 1rem;
    transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 2px solid transparent;
}
.btn-primary { background: var(--text-primary); color: var(--bg-root); }
.btn-secondary { background: transparent; border-color: var(--border-light); color: var(--text-primary); }
.btn-secondary:hover { background: var(--bg-pill); border-color: var(--text-primary); }

/* Project Cards */
.project-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: clamp(60px, 10vw, 120px);
}

.project-card {
    display: flex;
    flex-direction: column;
    gap: 24px;
    text-decoration: none;
}

.card-media-wrap {
    width: 100%;
    aspect-ratio: 16/9;
    border-radius: 24px;
    overflow: hidden;
    border: 1px solid var(--border-faint);
    background: var(--bg-card);
    position: relative;
}

.card-media-wrap img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 1.2s cubic-bezier(0.2, 1, 0.2, 1);
    opacity: 0.85;
}

.project-card:hover .card-media-wrap img {
    transform: scale(1.06);
    opacity: 1;
}

.card-content h3 {
    font-size: clamp(2rem, 4vw, 2.8rem);
    margin-bottom: 12px;
    color: var(--text-primary);
}

.card-meta-line {
    display: flex;
    gap: 16px;
    color: var(--text-secondary);
    font-size: 1rem;
    align-items: center;
}
.card-meta-line span:not(:last-child)::after {
    content: "â€¢";
    margin-left: 16px;
    color: var(--text-tertiary);
}

/* Testimonials (Fixed Spacing) */
.testimonial-section {
    position: relative;
    overflow: hidden;
    padding: 120px 0;
    text-align: center;
}
.t-track {
    display: flex;
    transition: transform 0.9s cubic-bezier(0.5, 0, 0.1, 1);
    width: 100%;
}
.t-slide {
    min-width: 100%;
    padding: 0 20px; /* Prevent text touching edges */
    opacity: 0.2;
    transform: scale(0.85);
    transition: all 0.9s;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.t-slide.active {
    opacity: 1;
    transform: scale(1);
}
.t-quote {
    font-family: var(--font-serif);
    font-size: clamp(1.8rem, 4vw, 3rem);
    color: var(--text-primary);
    margin-bottom: 48px;
    line-height: 1.4; /* Improved readability */
    max-width: 900px; /* Prevent lines from getting too long on wide screens */
    margin-left: auto;
    margin-right: auto;
}
.t-author h5 { font-size: 1.2rem; margin-bottom: 4px; }
.t-author span { color: var(--text-secondary); font-size: 0.95rem; }

.t-controls {
    display: flex;
    justify-content: center;
    gap: 24px;
    margin-top: 60px;
}
.t-btn {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: var(--text-primary);
    color: var(--bg-root);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.t-btn:hover { transform: scale(1.18); }
[data-theme="light"] .t-btn { background: #000000; color: #FFFFFF; }

/* Footer */
.site-footer {
    padding: 100px 0 40px;
    background: var(--bg-surface);
    border-top: 1px solid var(--border-faint);
}

.footer-top-grid {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 80px;
    margin-bottom: 100px;
}

.footer-cta h2 {
    font-size: clamp(3rem, 6vw, 4.5rem);
    line-height: 1.1;
    margin-bottom: 32px;
}

.footer-email-btn {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    font-size: 1.2rem;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-light);
    padding-bottom: 4px;
    transition: all 0.3s;
}
.footer-email-btn:hover { color: var(--accent-blue); border-color: var(--accent-blue); }

.footer-nav-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
}

.footer-col h5 {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-tertiary);
    margin-bottom: 24px;
}

.footer-col a {
    display: block;
    font-size: 1rem;
    color: var(--text-secondary);
    margin-bottom: 16px;
    width: fit-content;
}
.footer-col a:hover { color: var(--text-primary); transform: translateX(4px); }

.footer-bottom-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 32px;
    border-top: 1px solid var(--border-faint);
    color: var(--text-tertiary);
    font-size: 0.9rem;
    flex-wrap: wrap;
    gap: 20px;
}

/* Floating Resume Button */
.floating-resume-btn {
    position: fixed;
    bottom: 32px;
    right: 32px;
    z-index: var(--z-floating-btn);
    background: var(--text-primary);
    color: var(--bg-root);
    padding: 14px 28px;
    border-radius: 99px;
    font-weight: 600;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    gap: 8px;
    transition: transform 0.3s;
}
.floating-resume-btn:hover { transform: translateY(-4px); }
.floating-resume-btn .btn-icon { display: none; }

/* -------------------------------------------------------------------------- */
/*	9. RESPONSIVE BREAKPOINTS
/* -------------------------------------------------------------------------- */

@media (max-width: 1024px) {
    :root { --container-padding: 32px; }
}

@media (max-width: 900px) {
    .about-grid, .blog-layout { 
        grid-template-columns: 1fr !important; 
        gap: 40px; 
    }
    .about-sidebar { order: -1; margin-bottom: 2rem; position: static !important; }
    .blog-sidebar { margin-top: 40px; position: static !important; }
    .footer-top-grid { grid-template-columns: 1fr; gap: 60px; }
}

@media (max-width: 850px) {
    /* Hide Desktop Nav */
    .nav-wrapper { display: none; }
    /* Show Mobile Controls */
    .mobile-nav-toggle { display: flex; }
    .mobile-logo { display: block; }
    
    :root { 
        --section-gap: 80px; 
        --container-padding: 24px; 
    }
    
    .hero-title { 
        font-size: clamp(2.8rem, 11vw, 3.8rem);
        margin-bottom: 24px;
    }
    
    /* Layouts */
    .hero-section { align-items: center; text-align: center; padding-top: 120px; min-height: auto; }
    .contact-grid { grid-template-columns: 1fr; gap: 60px; }
    .achievements-strip { flex-direction: column; gap: 60px; padding: 60px 0; }
    .achieve-item::after { display: none; }
    
    /* Resume Button Icon Only */
    .floating-resume-btn {
        width: 56px; height: 56px; border-radius: 50%; padding: 0; justify-content: center;
        bottom: 24px; right: 24px;
    }
    .floating-resume-btn .btn-text { display: none; }
    .floating-resume-btn .btn-icon { display: block; }
}

@media (max-width: 600px) {
    :root { 
        --section-gap: 60px; 
        --container-padding: 20px; 
    }
    .hero-title { font-size: 2.25rem; }
    
    .btn { width: 100%; }
    .hero-actions { flex-direction: column; width: 100%; align-items: center; gap: 12px; }
    
    .site-footer { padding: 60px 0 32px; }
    .footer-nav-grid { grid-template-columns: 1fr 1fr; gap: 40px; }
    .footer-cta h2 { font-size: 2.2rem; }
    .footer-bottom-bar { flex-direction: column-reverse; align-items: flex-start; }
}
